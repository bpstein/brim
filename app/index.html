<!doctype html>

<html lang="en" ng-app="brimApp">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Arimo|Lato|Open+Sans|Roboto|Source+Sans+Pro" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <link href="/stylesheets/main.css" rel="stylesheet" type="text/css">
    <script src="bower_components/angular/angular.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers/GeoLocationController.js"></script>
    <script src="js/controllers/MapController.js"></script>
    <script src="js/controllers/MarkerController.js"></script>
    <script src="js/controllers/LocationController.js"></script>
    <script src="js/services/MapMarkerService.js"></script>
    <script src="js/services/LocationFactory.js"></script>
    <script src="bower_components/ngmap/build/scripts/ng-map.min.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/services/GetTagsService.js"></script>
    <script src="js/services/GetImagesByTagService.js"></script>
    <script src="js/services/GetImageByLocationService.js"></script>
    <title>Brim Photo Search</title>
  </head>

  <body>

    <div id="logo">
      BRIM app
    </div>

    <form>
      <fieldset id="search-block" ng-controller="brimAppController as ctrl">
        <input type="text" ng-model="tagsearch" id="searchTags" value="" placeholder="Enter a tag or location to search" autocomplete="off">

        <div id="button-block">
          <button class="search-button" id="searchTagSubmit" ng-click="ctrl.getTags(tagsearch)" alt="search by hashtag" title="search by tag">
            <i class="fa fa-hashtag" aria-hidden="true"></i>
          </button>

          <button class="search-button" id="searchImageSubmit" ng-click="ctrl.getImagesByTag(tagsearch)" alt="search by image" title="search by image">
            <i class="fa fa-picture-o" aria-hidden="true"></i>
          </button>

          <button class="search-button" id="searchLocationSubmit" alt="search by location" title="search by location">
            <i class="fa fa-map-marker" aria-hidden="true"></i>
          </button>
        </div>
        
      </fieldset>
    </form>

    {{error}}

      <span ng-repeat='tag in ctrl.tags'>
        <span id="relatedTags" ng-click="ctrl.saveTag(tag.name)">{{ tag.name }}</span>
      </span>

      <br>

<!--       <span ng-repeat='chosenTag in ctrl.chosenTags'>
        <span id="chosenTags">{{ chosenTag }}  </span>
        <span ng-click="ctrl.removeTag(chosenTag)">X</span>
      </span>

      <button id='tagOr-button' ng-click="ctrl.searchMultipleTags('or')">Multiple Search</button>
      <button id='tagAnd-button' ng-click="ctrl.searchMultipleTags('and')">And Search</button>
      <div id="images" ng-repeat='image in ctrl.images'>
        <img src="{{ image.images.thumbnail.url }}">
      </div>

      <button ng-click="ctrl.getImageByLocation()">loc button</button>
      {{ctrl.imageLoc}}
      <button ng-click="ctrl.searchTagsWithLocation('or')">tags or loc</button> -->
<!--       <button ng-click="ctrl.searchTagsWithLocation('and')">tags and loc</button>
 -->

    <figure ng-controller="MapCtrl">
      <gmap id="map" center="current-location" zoom="15"></gmap>
      <map-marker
        ng-repeat="location in locations"
        ng-class="{'active':location.isActive}"
        ng-style="{'background-image':'url(' + location.url + ')'}"
        ng-mouseenter="location.isActive=true"
        ng-mouseleave="location.isActive=false">
        <div ng-mouseenter="options=true" ng-mouseleave="options=false">
          <div id="username" ng-show="options">{{location.name}}</div>
          <div id="caption" ng-show="options">{{location.caption}}</div>
        </div>
      </map-marker>
    </figure>


    <ul ng-controller="LocationsCtrl">
      <li id="photo-list"
        ng-repeat="location in locations"
        ng-mouseenter="location.isActive=true"
        ng-mouseleave="location.isActive=false">
        {{location.url}}
        {{location.name}}
        {{location.caption}}
      </li>
    </ul>
    
  </body>
</html>

